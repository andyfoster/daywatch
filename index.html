<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="DayWatch - A simple and elegant countdown timer for your important dates" />
    <title>DayWatch</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="dark-mode.css" />
  </head>
  <body>
    <div class="container">
      <h1 id="date" title="Double click to hide/show timers" aria-label="Current date. Double click to toggle timer visibility">Today</h1>
      <button id="add-timer-btn" aria-label="Add new timer">+ Timer</button>
      <div id="timers-container" role="list" aria-label="List of timers"></div>
    </div>

    <!-- Side Panel for Event List -->
    <div id="sidebar-container">
      <div id="events-side-panel" class="side-panel" role="complementary" aria-label="Events sidebar">
        <div class="events-header-bar">
          <h2>Events</h2>
          <button class="new-timer-btn" id="new-timer-btn-sidebar" aria-label="Create new timer">
            New Timer
          </button>
        </div>
        <ul id="events-list" role="list" aria-label="Complete list of events">
          <!-- Event items will be added here dynamically -->
        </ul>
        <div class="sidebar-footer">
          <button id="settings-btn" aria-label="Open settings">‚öô</button>
          <button id="import-timers-btn" aria-label="Import timers">‚¨Ü</button>
          <button id="download-timers-btn" aria-label="Download timers">‚¨á</button>
          <button id="mass-delete-btn" aria-label="Mass delete timers">üóëÔ∏è</button>
        </div>
      </div>
      <div id="toggle-panel" class="toggle-panel" role="button" aria-label="Toggle sidebar" tabindex="0">
        <span id="toggle-arrow" aria-hidden="true">></span>
      </div>
    </div>

    <!-- Overlay for sidebar -->
    <div id="overlay" role="presentation"></div>

    <!-- Timer Modal -->
    <div id="timer-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">New Timer</h2>
          <button class="close" aria-label="Close modal">&times;</button>
        </div>
        <form id="timer-form">
          <div class="input-group">
            <input
              type="text"
              id="event-name"
              name="event-name"
              required
              placeholder="Event name (e.g., Birthday Party, Meeting)"
              aria-label="Event name"
            />
          </div>
          <div class="input-group">
            <input
              type="date"
              id="event-date"
              name="event-date"
              required
              aria-label="Event date"
            />
          </div>
          <div class="input-group">
            <input
              type="time"
              id="event-time"
              name="event-time"
              placeholder="Optional time"
              aria-label="Optional display time"
            />
          </div>
          <div class="input-group">
            <label for="event-color">Choose Color</label>
            <input
              type="color"
              name="event-color"
              id="event-color"
              aria-label="Choose event color"
            />
          </div>
          <div class="input-group">
            <input
              type="text"
              id="event-location"
              name="event-location"
              placeholder="Location (optional)"
              aria-label="Optional event location"
            />
          </div>
          <div class="input-group">
            <input
              type="url"
              id="event-link"
              name="event-link"
              placeholder="Link (optional) - https://example.com"
              aria-label="Optional event link"
            />
          </div>
          <div class="input-group">
            <label for="show-on-main-screen">
              <input
                type="checkbox"
                id="show-on-main-screen"
                name="show-on-main-screen"
                class="large-checkbox"
                aria-label="Show timer on main screen"
                checked
              />
              Show on main screen
            </label>
          </div>

          <div class="modal-actions">
            <button
              type="button"
              id="remove-timer-btn"
              class="danger-button"
              style="display: none"
              aria-label="Remove timer"
            >
              Remove
            </button>
            <button type="submit" id="submit-timer-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Import Modal -->
    <div id="import-modal" class="modal" role="dialog" aria-labelledby="import-title" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="import-title">Import Timers</h2>
          <button class="close" aria-label="Close import">&times;</button>
        </div>

        <div class="import-tabs">
          <button class="import-tab active" data-tab="file">Upload File</button>
          <button class="import-tab" data-tab="text">Paste Text</button>
        </div>

        <div id="file-import" class="import-section active">
          <div class="file-drop-zone" id="file-drop-zone">
            <div class="drop-zone-content">
              <p>üìÅ Drop your file here or click to browse</p>
              <input type="file" id="file-input" accept=".txt,.csv,.json" style="display: none;">
              <button type="button" id="browse-btn" class="secondary-btn">Browse Files</button>
            </div>
          </div>
          <div class="supported-formats">
            <p><strong>Supported formats:</strong></p>
            <ul>
              <li><strong>CSV:</strong> Name, Date, Color, Show on Main, Time, Location, Link</li>
              <li><strong>JSON:</strong> Array of timer objects</li>
              <li><strong>Text:</strong> Semicolon-separated values (DayWatch format)</li>
            </ul>
          </div>
        </div>

        <div id="text-import" class="import-section">
          <div class="input-group">
            <textarea
              id="import-text"
              rows="8"
              placeholder="Paste CSV, JSON, or text data here...&#10;&#10;Example CSV:&#10;Birthday Party, 2024-12-25, #ff0000, true, 18:00, Home, &#10;Meeting, 2024-12-30, #0000ff, true, 09:00, Office, https://zoom.us/meeting"
            ></textarea>
          </div>
          <div class="format-selector">
            <label for="import-format">Data Format</label>
            <select id="import-format">
              <option value="auto">Auto-detect</option>
              <option value="csv">CSV</option>
              <option value="json">JSON</option>
              <option value="text">Text (DayWatch format)</option>
            </select>
          </div>
        </div>

        <div class="import-options">
          <div class="input-group">
            <label for="import-mode">Import Mode</label>
            <select id="import-mode">
              <option value="replace">Replace all timers</option>
              <option value="append">Add to existing timers</option>
            </select>
          </div>
        </div>

        <div id="import-preview" class="import-preview" style="display: none;">
          <h3>Preview</h3>
          <div id="preview-content"></div>
          <p id="preview-summary"></p>
        </div>

        <div class="modal-actions">
          <button type="button" id="preview-import-btn" class="secondary-btn">Preview</button>
          <button type="button" id="confirm-import-btn" class="primary-btn" disabled>Import</button>
        </div>
      </div>
    </div>

    <!-- Mass Delete Modal -->
    <div id="mass-delete-modal" class="modal" role="dialog" aria-labelledby="mass-delete-title" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="mass-delete-title">Mass Delete Timers</h2>
          <button class="close" aria-label="Close mass delete">&times;</button>
        </div>

        <div class="mass-delete-options">
          <div class="input-group">
            <label>
              <input type="checkbox" id="select-all-timers"> Select All
            </label>
          </div>

          <div class="timer-selection-list" id="timer-selection-list">
            <!-- Timer checkboxes will be populated dynamically -->
          </div>

          <div class="quick-filters">
            <h3>Quick Filters:</h3>
            <button type="button" class="filter-btn" data-filter="past">Select Past Events</button>
            <button type="button" class="filter-btn" data-filter="future">Select Future Events</button>
            <button type="button" class="filter-btn" data-filter="hidden">Select Hidden Timers</button>
          </div>
        </div>

        <div class="modal-actions">
          <span id="selected-count">0 timers selected</span>
          <button type="button" id="cancel-mass-delete-btn" class="secondary-btn">Cancel</button>
          <button type="button" id="confirm-mass-delete-btn" class="danger-btn" disabled>Delete Selected</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" role="dialog" aria-labelledby="settings-title" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="settings-title">Settings</h2>
          <button class="close" aria-label="Close settings">&times;</button>
        </div>
        <form id="settings-form">
          <div class="input-group">
            <label for="date-format-select">Date Format</label>
            <select
              id="date-format-select"
              name="date-format"
              aria-label="Select date format"
            >
              <!-- Options will be populated dynamically -->
            </select>
          </div>
          <div class="input-group">
            <label for="display-font">Display Font</label>
            <select
              id="display-font"
              name="display-font"
              aria-label="Select display font"
            >
              <option value="Roboto Condensed">Roboto Condensed</option>
              <option value="Arial">Arial</option>
              <option value="Helvetica">Helvetica</option>
              <option value="Times New Roman">Times New Roman</option>
              <option value="Courier New">Courier New</option>
            </select>
          </div>
          <div class="input-group">
            <label for="language">Language</label>
            <select
              id="language"
              name="language"
              aria-label="Select language"
            >
              <option value="en">English</option>
              <option value="ja">Êó•Êú¨Ë™û</option>
              <option value="es">Espa√±ol</option>
              <option value="zh">‰∏≠Êñá</option>
              <option value="fa">ŸÅÿßÿ±ÿ≥€å</option>
            </select>
          </div>
          <div class="input-group">
            <label for="background-selection">Background</label>

            <!-- Background tabs -->
            <div class="background-tabs">
              <button type="button" class="background-tab active" data-tab="presets">Presets</button>
              <button type="button" class="background-tab" data-tab="search">Browse Unsplash</button>
            </div>

            <!-- Preset backgrounds -->
            <div id="preset-backgrounds" class="background-section active">
              <div id="background-selection" class="background-grid">
                <!-- Background options will be populated dynamically -->
              </div>
            </div>

            <!-- Unsplash search -->
            <div id="unsplash-search" class="background-section">
              <div class="unsplash-search-controls">
                <div class="search-input-group">
                  <input type="text" id="unsplash-search-input" placeholder="Search for backgrounds (e.g., nature, city, abstract)">
                  <button type="button" id="unsplash-search-btn" class="search-btn">Search</button>
                </div>
                <div class="search-suggestions">
                  <span class="suggestion-label">Popular:</span>
                  <button type="button" class="suggestion-btn" data-query="nature">Nature</button>
                  <button type="button" class="suggestion-btn" data-query="city">City</button>
                  <button type="button" class="suggestion-btn" data-query="abstract">Abstract</button>
                  <button type="button" class="suggestion-btn" data-query="space">Space</button>
                  <button type="button" class="suggestion-btn" data-query="minimal">Minimal</button>
                </div>
              </div>

              <div id="unsplash-results" class="background-grid">
                <div class="search-placeholder">
                  <p>üîç Search Unsplash for beautiful backgrounds</p>
                  <p class="search-hint">Try searching for "nature", "city", "abstract", or any other theme</p>
                </div>
              </div>

              <div id="unsplash-loading" class="loading-indicator" style="display: none;">
                <p>üîÑ Searching Unsplash...</p>
              </div>
            </div>
          </div>
          <div class="modal-actions">
            <button type="submit" id="save-settings-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
